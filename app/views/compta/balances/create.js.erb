// on ferme la fenêtre
$('button.close').click();
// on récrit le formulaire - ceci pour le cas où l'on viendrait d'un new
// avec des erreurs afin d'effacer les messages d'erreurs
$('div.modal-body').html('<%= j render partial:'modal_body_form' %>');
// on réassocie les date picker
$('.input_date_picker').datepicker(
    {
        dateFormat: 'dd/mm/yy',
        minDate: $(this).attr('data-jcmin'),
        maxDate: $(this).attr('data-jcmax')
    }
);
// on rend la balance
$('#balance_table').html(" <%= j render 'balance' %>");

// il faut également mettre à jour le lien pour le pdf
$('#icon_pdf').attr('href', '<%= j compta_period_balance_path(@period,
    :compta_balance=>{:from_account_id=>@balance.from_account_id, :to_account_id=>@balance.to_account_id,
        :from_date_picker=>@balance.from_date_picker, :to_date_picker=>@balance.to_date_picker },
    :format=>'pdf') %>');
    $('#icon_xls').attr('href', '<%= j compta_period_balance_path(@period,
    :compta_balance=>{:from_account_id=>@balance.from_account_id, :to_account_id=>@balance.to_account_id,
        :from_date_picker=>@balance.from_date_picker, :to_date_picker=>@balance.to_date_picker },
    :format=>'xls') %>');
$('#icon_csv').attr('href', '<%= j compta_period_balance_path(@period,
    :compta_balance=>{:from_account_id=>@balance.from_account_id, :to_account_id=>@balance.to_account_id,
        :from_date_picker=>@balance.from_date_picker, :to_date_picker=>@balance.to_date_picker },
    :format=>'csv') %>');

