// on ferme la fenêtre
$('button.close').click();
// on récrit le formulaire - ceci pour le cas où l'on viendrait d'un new
// avec des erreurs afin d'effacer les messages d'erreurs
$('div.modal-body').html('<%= j render partial:'modal_body_form' %>');
// on réassocie les date picker
$('.input_date_picker').datepicker(
    {
        dateFormat: 'dd/mm/yy',
        minDate: $('.input_date_picker').attr('data-jcmin'),
        maxDate: $('.input_date_picker').attr('data-jcmax')
    }
);
// on réécrit le titre
var h3text = "Ecritures du compte <%= @listing.account.long_name %>";
h3text += "<%= " - Du #{ordinalize_date(@listing.from_date)} au #{ordinalize_date(@listing.to_date)}" %>";
$('.champ > h3 > span#intitule').text(h3text);

//on met à jour les soldes
$('#movements').html("<%= j render 'movements' %>")

// on rend le listing
$('#listing_table').html(" <%= j render 'listing_table' %>");

// il faut également mettre à jour le lien pour le pdf
$('#icon_pdf').attr('href', '<%= j compta_period_listing_path(@period,
  :compta_listing=>{:account_id=>@listing.account_id,
  :from_date_picker=>@listing.from_date_picker, :to_date_picker=>@listing.to_date_picker },
  :format=>'pdf') %>');


// et on réinitialiser la data_table
drawDataTable();